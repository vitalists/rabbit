# 防止消息丢失:

## 1.持久化:
### 持久化包括 交换机持久化、队列持久化、消息持久化
- 交换机持久化:交换机声明时将durable 参数设为true
- 队列持久化: 队列声明时将durable参数设为true
- 消息持久化:发送消息时将投递模式设为2即BasicProperties中的deliveryMode属性设为2即可
### 要点:如果需要消息持久化需要将交换机、队列、消息同时持久化.
---
## 2.生产者确认
### 如果生产者发出去的消息没有得到队列的确认那么也会造成消息丢失
#### 解决生产者发送的消息丢失的措施:
- 通过事务机制实现
- 通过发送方消息确认机制实现(publisher confirm)
